name: ğŸ”¨ StealtHub AI - Windows Executable Builder

on:
  push:
    branches: [ main ]
    paths:
      - '**.py'
      - 'requirements.txt'
      - 'ai_engine/**'
      - 'gui/**'
      - 'templates/**'
      - 'offset_manager/**'
  release:
    types: [ published ]
  workflow_dispatch:  # Permite ejecutar manualmente

env:
  PYTHON_VERSION: '3.9'
  BUILD_VERSION: ${{ github.sha }}

jobs:
  # ğŸ”¨ Build Windows Executables
  build-windows:
    runs-on: windows-latest
    
    steps:
    - name: ğŸ“¥ Checkout repository
      uses: actions/checkout@v4
      
    - name: ğŸ Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: ${{ env.PYTHON_VERSION }}
        
    - name: ğŸ“¦ Install Python dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
        pip install pyinstaller>=5.0.0
        
    - name: ğŸ”§ Setup Windows SDK for compilation
      run: |
        # Instalar herramientas de compilaciÃ³n si es necesario
        choco install windows-sdk-10-version-2004-all
        
    - name: ğŸ¤– Build Chat AI Executable
      run: |
        echo "ğŸ”¨ Building Chat AI Executable..."
        pyinstaller --onefile --windowed --name "StealtHub_AI_Chat" --distpath "./dist/" --workpath "./build/" stealth_hub_chat.py
        
    - name: âš¡ Build CLI Executable  
      run: |
        echo "ğŸ”¨ Building CLI Executable..."
        pyinstaller --onefile --name "StealtHub_AI_CLI" --distpath "./dist/" --workpath "./build/" stealth_hub_cli.py
        
    - name: ğŸš€ Build Launcher Executable
      run: |
        echo "ğŸ”¨ Building Launcher Executable..."
        pyinstaller --onefile --windowed --name "StealtHub_AI_Launcher" --distpath "./dist/" --workpath "./build/" stealth_hub_launcher.py
        
    - name: ğŸ® Build GUI Control Panel
      run: |
        echo "ğŸ”¨ Building GUI Control Panel..."
        pyinstaller --onefile --windowed --name "StealtHub_AI_GUI" --distpath "./dist/" --workpath "./build/" gui/control_panel.py
        
    - name: ğŸ—ï¸ Build Main System
      run: |
        echo "ğŸ”¨ Building Main System..."
        pyinstaller --onefile --name "StealtHub_AI_Main" --distpath "./dist/" --workpath "./build/" main.py
        
    - name: ğŸ§¹ Clean build artifacts
      run: |
        # Mantener solo los .exe
        Get-ChildItem "./dist/" -Filter "*.exe" | ForEach-Object {
          Write-Host "âœ… Found executable: $($_.Name)"
        }
        
    - name: ğŸ“¦ Create Release Package
      run: |
        echo "ğŸ“¦ Creating release package..."
        
        # Crear directorio de paquete
        New-Item -ItemType Directory -Force -Path "./release/StealtHub_AI_v2.0.0"
        
        # Copiar ejecutables
        Copy-Item "./dist/*.exe" "./release/StealtHub_AI_v2.0.0/"
        
        # Copiar archivos de configuraciÃ³n
        New-Item -ItemType Directory -Force -Path "./release/StealtHub_AI_v2.0.0/config"
        Copy-Item "./requirements.txt" "./release/StealtHub_AI_v2.0.0/"
        Copy-Item "./README.md" "./release/StealtHub_AI_v2.0.0/"
        Copy-Item "./LICENSE" "./release/StealtHub_AI_v2.0.0/"
        
        # Crear README especÃ­fico para ejecutables
        Set-Content -Path "./release/StealtHub_AI_v2.0.0/README_EXECUTABLES.md" -Value @"
# ğŸ¤– StealtHub AI v2.0 - Ejecutables Listos

## ğŸš€ InstalaciÃ³n SÃºper Simple

**Â¡NO necesitas instalar Python!** Estos son ejecutables standalone.

### ğŸ¯ CÃ³mo usar:

1. **Descarga** este paquete
2. **Ejecuta** cualquiera de los archivos .exe
3. **Â¡Listo!** Ya puedes usar StealtHub AI

### ğŸ“± Ejecutables Disponibles:

- **ğŸ¤– StealtHub_AI_Chat.exe** - Interfaz de chat con IA (RECOMENDADO)
- **âš¡ StealtHub_AI_CLI.exe** - Interfaz de lÃ­nea de comandos
- **ğŸš€ StealtHub_AI_Launcher.exe** - Launcher del sistema
- **ğŸ® StealtHub_AI_GUI.exe** - Panel de control grÃ¡fico
- **ğŸ—ï¸ StealtHub_AI_Main.exe** - Sistema principal

### ğŸ’¬ CÃ³mo hablar con la IA:

1. Ejecuta `StealtHub_AI_Chat.exe`
2. En la ventana de chat, escribe:
   - "Create aimbot for Free Fire"
   - "Build Discord bot for gaming"
   - "Make ESP system with health bars"
   - "Create complete gaming package"

### ğŸ® Ejemplos de Uso:

```
ğŸ¤– AI: Â¡Hola! Soy tu asistente de desarrollo de juegos.
You: "Crea aimbot para Free Fire"
ğŸ¤– AI: âœ… Â¡Generado! Archivos listos en generated_code/
You: "Haz bot de Discord"
ğŸ¤– AI: âœ… Â¡Bot creado! CÃ³digo Python con comandos completos
```

### ğŸ”§ CaracterÃ­sticas:

- âœ… **Cero instalaciÃ³n** requerida
- âœ… **Ejecutables standalone** (no necesitas Python)
- âœ… **Interfaz grÃ¡fica** moderna
- âœ… **Chat inteligente** con IA
- âœ… **GeneraciÃ³n automÃ¡tica** de cÃ³digo
- âœ… **CompilaciÃ³n automÃ¡tica** a DLL
- âœ… **Discord integration** incluida

### ğŸ“ Soporte:

- **Discord**: Community Stealth
- **GitHub**: https://github.com/xpe-hub/StealtHub
- **Email**: xpepaneles@gmail.com

---
ğŸ¤– **StealtHub AI v2.0** | xpe.nettt | Community Stealth
*Compilado automÃ¡ticamente el $(Get-Date -Format 'yyyy-MM-dd HH:mm:ss')*
"@
        
        # Crear script de inicio rÃ¡pido
        Set-Content -Path "./release/StealtHub_AI_v2.0.0/START_AI.bat" -Value @"
@echo off
echo ğŸ¤– StealtHub AI v2.0 - Quick Start
echo ================================
echo.
echo ğŸ¯ Elige tu interfaz preferida:
echo.
echo 1. Chat AI (RECOMENDADO) - Interfaz de conversaciÃ³n
echo 2. CLI - LÃ­nea de comandos
echo 3. Launcher - Sistema completo
echo 4. GUI - Panel de control
echo.
set /p choice="Ingresa tu opciÃ³n (1-4): "

if "%choice%"=="1" (
    echo ğŸ¤– Iniciando Chat AI...
    start "" "StealtHub_AI_Chat.exe"
) else if "%choice%"=="2" (
    echo âš¡ Iniciando CLI...
    start "" "StealtHub_AI_CLI.exe"
) else if "%choice%"=="3" (
    echo ğŸš€ Iniciando Launcher...
    start "" "StealtHub_AI_Launcher.exe"
) else if "%choice%"=="4" (
    echo ğŸ® Iniciando GUI...
    start "" "StealtHub_AI_GUI.exe"
) else (
    echo âŒ OpciÃ³n invÃ¡lida. Usando Chat AI por defecto...
    start "" "StealtHub_AI_Chat.exe"
)

echo.
echo âœ… StealtHub AI iniciado!
echo.
echo ğŸ’¬ Comandos Ãºtiles para la IA:
echo - "Create aimbot for Free Fire"
echo - "Build Discord bot for gaming"
echo - "Make ESP with health bars"
echo - "Create complete project"
echo.
pause
"@
        
    - name: ğŸ—‚ï¸ Create ZIP Archive
      run: |
        echo "ğŸ—‚ï¸ Creating ZIP archive..."
        Compress-Archive -Path "./release/*" -DestinationPath "./StealtHub_AI_v2.0.0_Executables.zip" -Force
        
    - name: ğŸ“Š Upload Build Artifacts
      uses: actions/upload-artifact@v3
      with:
        name: stealtHub-ai-executables
        path: |
          ./dist/*.exe
          ./release/
          ./StealtHub_AI_v2.0.0_Executables.zip
          
  # ğŸš€ Create Release on GitHub
  create-release:
    runs-on: ubuntu-latest
    needs: build-windows
    if: github.ref == 'refs/heads/main' || github.event_name == 'release'
    
    steps:
    - name: ğŸ“¥ Download Artifacts
      uses: actions/download-artifact@v3
      with:
        name: stealtHub-ai-executables
        path: ./release_artifacts
        
    - name: ğŸ·ï¸ Get Release Tag
      id: get_release_tag
      run: |
        if [[ "${{ github.event_name }}" == "release" ]]; then
          echo "tag=${{ github.event.release.tag_name }}" >> $GITHUB_OUTPUT
        else
          echo "tag=v2.0.0-build-$(date +%Y%m%d-%H%M%S)" >> $GITHUB_OUTPUT
        fi
        
    - name: ğŸš€ Create GitHub Release
      uses: softprops/action-gh-release@v1
      with:
        tag_name: ${{ steps.get_release_tag.outputs.tag }}
        name: ğŸ¤– StealtHub AI v2.0 - Ejecutables Listos
        body: |
          ## ğŸ‰ **StealtHub AI v2.0 - Ejecutables Listos**
          
          ### âœ… **Â¡INSTALACIÃ“N SÃšPER SIMPLE!**
          **NO necesitas instalar Python ni dependencias**
          
          ### ğŸš€ **Descarga y Ejecuta**
          1. Descarga `StealtHub_AI_v2.0.0_Executables.zip`
          2. Descomprime el archivo
          3. Ejecuta cualquier archivo `.exe`
          4. Â¡Listo! Ya puedes usar tu IA
          
          ### ğŸ® **Ejecutables Incluidos:**
          - **ğŸ¤– StealtHub_AI_Chat.exe** - Chat con IA (RECOMENDADO)
          - **âš¡ StealtHub_AI_CLI.exe** - LÃ­nea de comandos
          - **ğŸš€ StealtHub_AI_Launcher.exe** - Sistema launcher
          - **ğŸ® StealtHub_AI_GUI.exe** - Panel de control
          - **ğŸ—ï¸ StealtHub_AI_Main.exe** - Sistema principal
          
          ### ğŸ’¬ **CÃ³mo Hablar con la IA:**
          ```
          "Create aimbot for Free Fire"
          "Build Discord bot for gaming controls"
          "Make ESP with health bars and names"
          "Create complete gaming project"
          ```
          
          ### ğŸ¯ **CaracterÃ­sticas:**
          - âœ… **Cero instalaciÃ³n** requerida
          - âœ… **Ejecutables standalone** 
          - âœ… **Interfaz grÃ¡fica** moderna
          - âœ… **Chat inteligente** con IA
          - âœ… **GeneraciÃ³n automÃ¡tica** de cÃ³digo C++/Python
          - âœ… **CompilaciÃ³n automÃ¡tica** a DLL
          - âœ… **Discord integration** incluida
          - âœ… **Anti-detection** mechanisms
          
          ### ğŸ“ **Archivos Incluidos:**
          - Ejecutables (.exe) listos para usar
          - README especÃ­fico para ejecutables
          - Script de inicio rÃ¡pido (START_AI.bat)
          - DocumentaciÃ³n completa
          - ConfiguraciÃ³n por defecto
          
          ### ğŸ”¥ **Para Principiantes:**
          - **Doble clic** en `START_AI.bat`
          - **Selecciona** la opciÃ³n 1 (Chat AI)
          - **Â¡Empieza a chatear** con tu IA!
          
          ---
          
          **ğŸ¤– StealtHub AI v2.0** | **Community Stealth** | **xpe.nettt**
          
          *Compilado automÃ¡ticamente con GitHub Actions*
          
        files: |
          release_artifacts/StealtHub_AI_v2.0.0_Executables.zip
        draft: false
        prerelease: false
        
    - name: ğŸ“¢ Success Notification
      run: |
        echo "ğŸ‰ StealtHub AI Executables Build & Release Complete!"
        echo "ğŸ“¦ Release: ${{ steps.get_release_tag.outputs.tag }}"
        echo "ğŸ”— GitHub: ${{ github.repository }}"
        echo "ğŸ’¾ Download: Check the release artifacts above"
        echo ""
        echo "âœ… Users can now download and run the executables directly!"
        echo "ğŸ¯ No Python installation required!"
        
  # ğŸ”” Notification Job
  notify:
    runs-on: ubuntu-latest
    needs: [build-windows, create-release]
    if: always()
    
    steps:
    - name: ğŸ“Š Build Results
      run: |
        if [[ "${{ needs.build-windows.result }}" == "success" && "${{ needs.create-release.result }}" == "success" ]]; then
          echo "ğŸ‰ SUCCESS: All Windows executables built and released!"
          echo "âœ… Chat AI, CLI, Launcher, GUI, and Main system executables ready"
          echo "ğŸ“¦ Release package created with ZIP archive"
          echo "ğŸ”— Available at GitHub Releases"
          echo ""
          echo "ğŸ¯ USERS CAN NOW:"
          echo "   1. Download ZIP from GitHub Releases"
          echo "   2. Extract and run any .exe directly"
          echo "   3. Start chatting with AI immediately"
          echo "   4. NO Python installation required!"
        else
          echo "âŒ BUILD FAILED"
          echo "Please check the build logs for errors"
        fi